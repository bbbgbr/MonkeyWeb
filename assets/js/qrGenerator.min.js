let requestQR=(()=>{var a=_asyncToGenerator(function*(){let b={subject:$("#subjSelect").val().slice(0,1),ageGroup:$("#subjSelect").val().slice(1),level:$("#seriesSelect").val(),difficulty:$("#difficultSelect").val(),number:1<$("#sheetNumSelect").val().length?$("#sheetNumSelect").val():"0"+$("#sheetNumSelect").val(),rev:$("#revInput").val().slice(0,1),subRev:$("#revInput").val().slice(2)},c=$("#subSeriesSelect").val();""!==c&&(1<c.length?(b.alternative=c.slice(0,1),b.supplement=c.slice(1)):b.alternative=c);let d=yield $.post("post/v1/requestQR",b);generateQR(d)});return function(){return a.apply(this,arguments)}})();function _asyncToGenerator(a){return function(){var b=a.apply(this,arguments);return new Promise(function(c,d){function e(f,g){try{var h=b[f](g),i=h.value}catch(j){return void d(j)}return h.done?void c(i):Promise.resolve(i).then(function(j){e("next",j)},function(j){e("throw",j)})}return e("next")})}}let lastTxt="";mobilecheck()?$(".form-label").addClass("sr-only"):$(".form-label").removeClass("sr-only"),$("#hotLabel").hide(),$("#hwLabel").hide(),$("#skLabel").hide(),$("#testLabel").hide(),$("#DownloadAllButt").hide();const genPreview=()=>{let a="";a+=$("#subjSelect").val()+"-",a+=$("#seriesSelect").val()+$("#difficultSelect").val(),a+=1<$("#sheetNumSelect").val().length?$("#sheetNumSelect").val():"0"+$("#sheetNumSelect").val(),a+=$("#subSeriesSelect").val(),a+="(rev"+$("#revInput").val()+")",lastTxt=a,$("#previewInput").val(a)};genPreview(),$("#subjSelect").change(function(){genPreview()}),$("#seriesSelect").change(function(){genPreview()}),$("#difficultSelect").change(function(){genPreview()}),$("#sheetNumSelect").change(function(){genPreview()}),$("#subSeriesSelect").change(function(){genPreview()}),$("#revInput").change(function(){genPreview()}),$("#generateButt").click(function(){requestQR()});function generateQR(a){$("#hotLabel").show(),$("#hwLabel").show(),$("#skLabel").show(),$("#testLabel").show(),$("#DownloadAllButt").show(),$("#hotQR").empty(),$("#hwQR").empty(),$("#skQR").empty(),$("#testQR").empty(),$("#hotQR").append("<canvas width='256' height='256'></canvas>"),$("#hwQR").append("<canvas width='256' height='256'></canvas>"),$("#skQR").append("<canvas width='256' height='256'></canvas>"),$("#testQR").append("<canvas width='256' height='256'></canvas>"),genCanvas("hotQR",a),genCanvas("hwQR",a),genCanvas("skQR",a),genCanvas("testQR",a)}function genCanvas(a,b){let c=document.getElementById(a).getElementsByTagName("canvas")[0],d=c.getContext("2d"),e=new Image;switch(e.crossOrigin="anonymous",e.onload=function(){d.drawImage(e,0,0)},a.slice(0,-2)){case"hot":e.src="https://chart.googleapis.com/chart?cht=qr&chs=256x256&chld=L|0&chl="+b.hot;break;case"hw":e.src="https://chart.googleapis.com/chart?cht=qr&chs=256x256&chld=L|0&chl="+b.hw;break;case"sk":e.src="https://chart.googleapis.com/chart?cht=qr&chs=256x256&chld=L|0&chl="+b.skill;break;case"test":e.src="https://chart.googleapis.com/chart?cht=qr&chs=256x256&chld=L|0&chl="+b.test;break;default:}}function downloadQR(a,b){let c=document.getElementById(a).getElementsByTagName("canvas")[0];let d=c.toDataURL(),e=document.createElement("a");e.href=d,e.download=b,document.body.appendChild(e),e.click()}$("#hotQR").click(function(){downloadQR(this.id,lastTxt+"hotkey")}),$("#hwQR").click(function(){downloadQR(this.id,lastTxt+"homework")}),$("#skQR").click(function(){downloadQR(this.id,lastTxt+"skill")}),$("#testQR").click(function(){downloadQR(this.id,lastTxt+"test")}),$("#DownloadAllButt").click(function(){downloadQR("hotQR",lastTxt+"hotkey"),setTimeout(()=>{downloadQR("hwQR",lastTxt+"homework")},50),setTimeout(()=>{downloadQR("skQR",lastTxt+"skill")},100),setTimeout(()=>{downloadQR("testQR",lastTxt+"test")},150)});