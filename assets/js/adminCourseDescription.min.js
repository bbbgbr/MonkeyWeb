let genTutorOption=(()=>{var c=_asyncToGenerator(function*(d){let e=yield $.post("debug/listUser");for(let f in e.sort(function(f,g){return f._id-g._id}),e){let g=e[f]._id+"";0<=g.indexOf("990")&&$("#tutorInput").append("<option value="+e[f]._id+">"+e[f]._id+" - "+e[f].nicknameEn+"</option>")}$("#tutorInput").val(d)});return function(){return c.apply(this,arguments)}})(),sendEditProfile=(()=>{var c=_asyncToGenerator(function*(){let d={courseID:crCookie};""!=$("#levelInput").val()&&(d.level=$("#levelInput").val()),""!=$("#desInput").val()&&(d.description=$("#desInput").val()),d.day=$("#dayInput").val(),d.tutor=[$("#tutorInput").val()],d.room=$("#roomInput").val(),log(d),yield $.post("post/editCourse",d),location.reload()});return function(){return c.apply(this,arguments)}})();function _asyncToGenerator(c){return function(){var d=c.apply(this,arguments);return new Promise(function(e,f){function g(h,j){try{var k=d[h](j),l=k.value}catch(m){return void f(m)}return k.done?void e(l):Promise.resolve(l).then(function(m){g("next",m)},function(m){g("throw",m)})}return g("next")})}}const getDateFullName=c=>{return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][c]};let crCookie=getCookieDict().monkeyWebAdminAllcourseSelectedCourseID;crCookie===void 0?self.location="/adminAllCourse":courseInfo(crCookie).then(c=>{$("#courseName").html(c.courseName),name(c.tutor[0]).then(f=>{let g="Tutor : "+f.nicknameEn+" ("+f.firstnameEn+")";$("#tutorName").html(g)});let d=moment(c.day);$("#day").html("Day: "+getDateFullName(d.day())),$("#time").html(d.hour()+":00 - "+(d.hour()+2)+":00"),$("#crDescription").html(c.description),$("#courseID").html("CrID: "+crCookie);let e=[];for(let f in c.student)e.push($.post("post/studentProfile",{studentID:c.student[f]}));Promise.all(e).then(f=>{let g=1;for(let h in f){let j=6<f[h].grade?"S"+(f[h].grade-6):"P"+f[h].grade;"active"==f[h].status&&($("#allStudentInCourseTable").append("<tr class='std-row' id='"+c.student[h]+"'><td class='text-center'>"+g+"</td><td class='text-center'>"+c.student[h]+"</td><td class='text-center'>"+j+"</td><td class='text-center'>"+f[h].nickname+"</td><td class='text-center'>"+f[h].firstname+"</td><td class='text-center'>"+f[h].lastname+"</td></tr>"),g+=1)}}),$("#levelInput").attr("placeholder",c.level),$("#desInput").attr("placeholder",c.description),$("#dayInput").val(c.day),$("#roomInput").val(c.room),genTutorOption(c.tutor[0])}),$("#allStudentInCourseTable").on("click",".std-row",function(){writeCookie("monkeyWebAdminAllstudentSelectedUser",this.id),self.location="/adminStudentprofile"}),$("#courseName").click(function(){$("#changeCrInfoModal").modal("show")}),$("#changeCrInfoButt").click(function(){sendEditProfile()});