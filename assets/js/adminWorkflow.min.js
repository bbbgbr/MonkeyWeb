let getData=(()=>{var a=_asyncToGenerator(function*(){let b=yield $.post('post/v1/listTutor'),c=[];for(let g in b)c.push($.post('v2/workflow/listNode',{id:b[g].tutorID}));let d=yield Promise.all(c);for(let g in d)uniqueTask=_.union(uniqueTask,d[g].nodes),uniqueTask=_.remove(uniqueTask,function(h){return'note'!==h.status&&h.canDelete});getTutorName();let f=_.uniqBy(uniqueTask,'childOwner');for(let g in f=_.orderBy(f,'childOwnerName','asc'),f)$('#filterSelect').append('<option value=\''+f[g].childOwner+'\'>'+f[g].childOwnerName+'</option>')});return function(){return a.apply(this,arguments)}})(),getTutorName=(()=>{var a=_asyncToGenerator(function*(){let b=[];for(let d in uniqueTask)b.push(name(uniqueTask[d].owner));let c=yield Promise.all(b);for(let d in uniqueTask)uniqueTask[d].owner=c[d].nicknameEn;genTable(1)});return function(){return a.apply(this,arguments)}})();function _asyncToGenerator(a){return function(){var b=a.apply(this,arguments);return new Promise(function(c,d){function f(g,h){try{var j=b[g](h),k=j.value}catch(l){return void d(l)}return j.done?void c(k):Promise.resolve(k).then(function(l){f('next',l)},function(l){f('throw',l)})}return f('next')})}}$('#bodyPane').hide();let uniqueTask=[];getData();function genTable(a){let b=uniqueTask,c=parseInt($('#filterSelect').val());switch(0!==c&&(b=b.filter(f=>{return f.childOwner===c})),$('#taskCount').html(b.length+' task'),a){case 2:b=_.orderBy(b,'title','asc');break;case 3:b=_.orderBy(b,'owner','asc');break;case 4:b=_.orderBy(b,'childStatus','asc');break;case 5:b=_.orderBy(b,'childOwnerName','asc');break;case 6:b=_.orderBy(b,'duedate','asc');break;default:}let d=$('#tableBody');for(let f in d.empty(),b){let g=null===b[f].duedate?'None':moment(b[f].duedate).format('DD/MM/YY');let h='';switch(b[f].childStatus.toLowerCase()){case'inprogress':h='bg-warning';break;case'complete':h='bg-success text-white';break;default:}d.append('<tr class=\''+h+'\'><td class=\'text-center\'>'+b[f].title+'</td><td class=\'text-center\'>'+b[f].owner+'</td><td class=\'text-center\'>'+b[f].childStatus+'</td><td class=\'text-center\'>'+b[f].childOwnerName+'</td><td class=\'text-center\'>'+g+'</td></tr>')}$('#loaddingPane').hide(),$('#bodyPane').show()}$('#filterSelect').change(function(){genTable(1)});