let getQuarter=(()=>{var a=_asyncToGenerator(function*(){let[b,c]=yield Promise.all([listQuarter("private"),getConfig()]);for(let e in b.quarter)$("#quarter").append("<option value='"+b.quarter[e].year+"-"+b.quarter[e].quarter+"'>"+b.quarter[e].name+"</option>");let d=getCookieDict();if(d.monkeyWebSelectedQuarter===void 0)$("#quarter").val(c.defaultQuarter.registration.year+"-"+c.defaultQuarter.registration.quarter),writeCookie("monkeyWebSelectedQuarter",$("#quarter").val()),year=c.defaultQuarter.registration.year,quarter=c.defaultQuarter.registration.quarter;else{$("#quarter").val(d.monkeyWebSelectedQuarter);let e=$("#quarter").val();year=e.slice(0,4),quarter=e.slice(5)}});return function(){return a.apply(this,arguments)}})();function _asyncToGenerator(a){return function(){var b=a.apply(this,arguments);return new Promise(function(c,d){function e(f,g){try{var h=b[f](g),k=h.value}catch(l){return void d(l)}return h.done?void c(k):Promise.resolve(k).then(function(l){e("next",l)},function(l){e("throw",l)})}return e("next")})}}const studentLevel=["P1","P2","P3","P4","P5","P6","S1","S2","S3","S4","S5","S6"];function dateToDay(a){if(10>quarter)switch(a){case 1.764e8:return"sat8";break;case 1.836e8:return"sat10";break;case 1.944e8:return"sat13";break;case 2.016e8:return"sat15";break;case 2.628e8:return"sun8";break;case 2.7e8:return"sun10";break;case 2.808e8:return"sun13";break;case 2.88e8:return"sun15";}else{let b=moment(a);switch(b.hour()){case 8:return"sat8";break;case 10:return"sat10";break;case 13:return"sat13";}}}let year,quarter;getQuarter(),$("#quarter").change(function(){writeCookie("monkeyWebSelectedQuarter",$("#quarter").val());let a=$("#quarter").val();year=a.slice(0,4),quarter=a.slice(5),sendLevel()});function sendLevel(){let a=[];$("#level").find(":checked").each(function(){a.push($(this).val())}),$("#tableLevel").empty().append("<td rowspan='2' style='background-color: black'></td>"),$("#tableGroup").empty(),$("#sat8").empty().append("<th width='70px' style='background-color: #cf95ff;text-align: center;vertical-align: middle'>8-10</th>"),$("#sat10").empty().append("<th style='background-color: #cf95ff;text-align: center;vertical-align: middle'>10-12</th>"),$("#sat13").empty().append("<th style='background-color: #cf95ff;text-align: center;vertical-align: middle'>13-15</th>"),$("#sat15").empty().append("<th style='background-color: #cf95ff;text-align: center;vertical-align: middle'>15-17</th>"),$("#sun8").empty().append("<th style='background-color: #ffd59a;text-align: center;vertical-align: middle'>8-10</th>"),$("#sun10").empty().append("<th style='background-color: #ffd59a;text-align: center;vertical-align: middle'>10-12</th>"),$("#sun13").empty().append("<th style='background-color: #ffd59a;text-align: center;vertical-align: middle'>13-15</th>"),$("#sun15").empty().append("<th style='background-color: #ffd59a;text-align: center;vertical-align: middle'>15-17</th>"),$("#spaceRow").empty().append("<td colspan='80'></td>"),genTable(a,0)}function genTable(a,b){if(!(b>=a.length)){let c=a[b]-1;$.post("post/gradeCourse",{grade:a[b],year:year,quarter:quarter}).then(d=>{$.post("post/listCourseSuggestion",{grade:a[b],year:year,quarter:quarter}).then(e=>{for(let h=0;h<e.course.length;h++)$("#sat8").append("<td style='text-align: center' id="+a[b]+"sat8"+(h+1)+"></td>"),$("#sat10").append("<td style='text-align: center' id="+a[b]+"sat10"+(h+1)+"></td>"),$("#sat13").append("<td style='text-align: center' id="+a[b]+"sat13"+(h+1)+"></td>"),$("#sat15").append("<td style='text-align: center' id="+a[b]+"sat15"+(h+1)+"></td>"),$("#sun8").append("<td style='text-align: center' id="+a[b]+"sun8"+(h+1)+"></td>"),$("#sun10").append("<td style='text-align: center' id="+a[b]+"sun10"+(h+1)+"></td>"),$("#sun13").append("<td style='text-align: center' id="+a[b]+"sun13"+(h+1)+"></td>"),$("#sun15").append("<td style='text-align: center' id="+a[b]+"sun15"+(h+1)+"></td>");let f=[];for(let h=0;h<e.course.length;h++)f=f.concat(e.course[h].courseID);let g=[];for(let h=0;h<d.course.length;h++)-1===f.indexOf(d.course[h].courseID)&&g.push(d.course[h].courseID);$("#tableLevel").append("<th style='text-align: center;background-color:"+(0==b%2?"#bfffa5":"#aeffff")+"' colspan="+e.course.length+">"+studentLevel[c]+"</th>"),genTableGroup(a[b],e,d,g,0),genTable(a,b+1)})})}}function genTableGroup(a,b,c,d,e){if(0===b.course.length){$("#tableGroup").append("<td style='text-align: center'></td>");for(let f=0;f<c.course.length;f++)$.post("post/name",{userID:c.course[f].tutor[0]}).then(g=>{$("#"+a+dateToDay(c.course[f].day)+(e+1)).append(c.course[f].courseName+"-"+g.nicknameEn+"<br>")});return}if(!(e>=b.course.length)){$("#tableGroup").append("<th style='text-align: center'>"+b.course[e].level+"</th>");for(let f=0;f<c.course.length;f++)0<=b.course[e].courseID.indexOf(c.course[f].courseID)&&$.post("post/name",{userID:c.course[f].tutor[0]}).then(g=>{$("#"+a+dateToDay(c.course[f].day)+(e+1)).append(c.course[f].courseName+"-"+g.nicknameEn+"<br>")}),0<=d.indexOf(c.course[f].courseID)&&$.post("post/name",{userID:c.course[f].tutor[0]}).then(g=>{$("#"+a+dateToDay(c.course[f].day)+(e+1)).append(c.course[f].courseName+"-"+g.nicknameEn+"<br>")});genTableGroup(a,b,c,d,e+1)}}